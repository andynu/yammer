(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const e of s)if(e.type==="childList")for(const l of e.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function o(s){const e={};return s.integrity&&(e.integrity=s.integrity),s.referrerPolicy&&(e.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?e.credentials="include":s.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function n(s){if(s.ep)return;s.ep=!0;const e=o(s);fetch(s.href,e)}})();function D(t,a=!1){return window.__TAURI_INTERNALS__.transformCallback(t,a)}async function w(t,a={},o){return window.__TAURI_INTERNALS__.invoke(t,a,o)}var E;(function(t){t.WINDOW_RESIZED="tauri://resize",t.WINDOW_MOVED="tauri://move",t.WINDOW_CLOSE_REQUESTED="tauri://close-requested",t.WINDOW_DESTROYED="tauri://destroyed",t.WINDOW_FOCUS="tauri://focus",t.WINDOW_BLUR="tauri://blur",t.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",t.WINDOW_THEME_CHANGED="tauri://theme-changed",t.WINDOW_CREATED="tauri://window-created",t.WEBVIEW_CREATED="tauri://webview-created",t.DRAG_ENTER="tauri://drag-enter",t.DRAG_OVER="tauri://drag-over",t.DRAG_DROP="tauri://drag-drop",t.DRAG_LEAVE="tauri://drag-leave"})(E||(E={}));async function I(t,a){window.__TAURI_EVENT_PLUGIN_INTERNALS__.unregisterListener(t,a),await w("plugin:event|unlisten",{event:t,eventId:a})}async function R(t,a,o){var n;const s=(n=void 0)!==null&&n!==void 0?n:{kind:"Any"};return w("plugin:event|listen",{event:t,target:s,handler:D(a)}).then(e=>async()=>I(t,e))}document.addEventListener("DOMContentLoaded",async()=>{console.log("Yammer app loaded");const t=document.querySelector(".status-indicator"),a=document.querySelector(".status-text"),o=document.querySelector(".transcript-text"),s=document.getElementById("waveform").getContext("2d");let e={status:"idle",transcript:"",isPartial:!1};const l=268,f=40,c=40,y=Math.floor(l/c),A=1;let p=new Array(c).fill(0);function m(){s.clearRect(0,0,l,f);for(let r=0;r<c;r++){const i=p[r],d=Math.max(2,i*f),u=r*y,g=(f-d)/2,_=Math.min(255,Math.floor(i*255+100));s.fillStyle=`rgb(${_}, ${Math.floor(_*.7)}, ${Math.floor(_*.3)})`,s.fillRect(u,g,y-A,d)}}function h(){t.className=`status-indicator ${e.status}`;const r={idle:"Ready",listening:"Listening...",processing:"Processing...",correcting:"Correcting...",done:"Done",error:"Error"};a.textContent=r[e.status]||"Ready",e.transcript?(o.textContent=e.transcript,o.classList.remove("placeholder"),e.isPartial?o.classList.add("partial"):o.classList.remove("partial")):(o.textContent="Press hotkey to start dictating...",o.classList.add("placeholder"),o.classList.remove("partial"))}await R("audio-samples",r=>{const i=r.payload;if(Array.isArray(i)&&i.length>0){const d=Math.floor(i.length/c);for(let u=0;u<c;u++){const g=u*d;p[u]=Math.abs(i[g]||0)}m()}}),await R("dictation-toggle",()=>{console.log("Dictation toggle hotkey received"),e.status==="idle"||e.status==="done"||e.status==="error"?window.setYammerState({status:"listening",transcript:"",isPartial:!1}):e.status==="listening"&&window.setYammerState({status:"processing",isPartial:!0})}),setInterval(()=>{if(e.status!=="listening"){for(let r=0;r<c;r++)p[r]*=.85;m()}},50),window.setYammerState=r=>{e={...e,...r},h()},window.testWaveform=async()=>{try{await w("simulate_audio"),console.log("Simulated audio sent")}catch(r){console.error("Failed to simulate audio:",r)}},window.testStates=()=>{const r=[{status:"listening",transcript:"",isPartial:!1},{status:"processing",transcript:"This is a test...",isPartial:!0},{status:"correcting",transcript:"This is a test transcript",isPartial:!1},{status:"done",transcript:"This is a test transcript.",isPartial:!1},{status:"idle",transcript:"",isPartial:!1}];let i=0;const d=setInterval(()=>{window.setYammerState(r[i]),console.log("State:",r[i].status),i++,i>=r.length&&clearInterval(d)},2e3)},h(),m(),setTimeout(()=>{window.testWaveform(),setInterval(()=>window.testWaveform(),1e3)},1e3)});
